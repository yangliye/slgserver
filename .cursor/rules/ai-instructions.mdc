---
description: AI 助手交互规范
globs:
alwaysApply: true
---

# AI 助手交互规范

## 语言要求

- **始终使用中文回复**
- 代码注释可以使用英文
- Git 提交信息使用英文

## 代码生成规范

### 修改代码前

1. **必须先读取文件**：使用 Read 工具读取原文件
2. **确认方法存在**：调用方法前先 grep 确认
3. **检查依赖**：确保 import 的类存在

### 生成代码时

1. 不使用内部类
2. 不使用 `System.currentTimeMillis()`，改用 `TimeUtils.currentTimeMillis()`
3. 遵循现有代码风格
4. 添加适当的 Javadoc 注释

### 修改代码后

1. 运行 `.\gradlew compileJava` 验证编译
2. 检查 linter 错误
3. 如有问题直接修复

## 临时文件处理

- 临时脚本放到 `D:\workspace\cursor` 目录
- 优先使用 Go 语言，不用 Python
- 不要在项目目录创建临时文件

## Git 推送规范

**重要：代码未调试完成不允许推送到 GitHub**

- 只有用户明确要求推送时才执行 `git push`
- 推送前确认代码已通过编译和测试
- 不要主动推送，等待用户指示

## 提交规范

使用 Conventional Commits：

```
feat: 新功能
fix: 修复 bug
refactor: 重构
chore: 杂项（依赖更新等）
docs: 文档
test: 测试
```

示例：
```
feat: add player login handler
fix: resolve null pointer in battle calculation
refactor: extract common logic to BaseService
chore: upgrade dependencies to latest versions
```

## 问题排查

遇到问题时：
1. 先检查编译错误
2. 查看相关源码确认 API
3. 不要猜测，先验证

## 性能考虑

SLG 游戏对性能敏感：
- 避免在热点代码中创建对象
- 使用对象池复用
- 批量操作优于单条操作
- 异步处理 IO 操作
